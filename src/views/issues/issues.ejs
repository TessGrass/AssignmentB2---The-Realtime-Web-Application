<h1>VIEW ISSUES</h1>

<% if (data?.length > 0) { %>
    <div class="issue-list-wrapper">
    <% data.forEach(obj => { %>
        <form method="post" action="./issues">
        <div class="issue-wrapper">
          <%if(obj.state === 'opened') {%>
            <button type="submit" name="state" value="<%=obj.state%>" class="open-issue-btn">Issue open</button> 
            <input type="hidden" name="id" value="<%=obj.iid%>"/>
            <%} else {%><button type="submit" name="state" value="<%=obj.state%>" class="closed-issue-btn">Issue closed</button> 
            <input type="hidden" name="id" value="<%=obj.iid%>"/>
            <%}%>
           
            <p class="title-in-issue">#<%=obj.iid%>. <%=obj.title %>
            <br><p class="issue-description">ToDo:<%=obj.description%></p>
       </div>
    </form>
    
    <% }) %>
    </div>
  <% } else { %>
      <p>Oh no! No issues to display.</p>
      <%}%>

     <%# Socket.IO: Template for the client. The same as above, sort of. %>
<template id="issue-template">
      <p class="title-in-issue"></p><br>
      <p class="issue-description"></p>
</template>
   
